<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
</head>
	

<body>
	<script>
	function formatDate(date) {
		var now = new Date();
		var diff = now - date; // разница в миллисекундах

		if (diff < 1000) { // прошло менее 1 секунды
			return 'только что';
		}

		var sec = Math.floor(diff / 1000)	// округляем diff до секунд
		if (sec < 60) {
			return sec + ' сек. назад';
		}

		var min = Math.floor(diff / 60000) // округляем diff до минут
		if (min < 60) {
			return min + ' мин. назад';
		}

		var d = date;
		d = [
			'0' + d.getDate(),
			'0' + (d.getMonth() + 1),
			'' + d.getFullYear(),
			'0' + d.getHours(),
			'0' + d.getMinutes()
		]

		for (var i = 0; i < d.length; i++) {
			d[i] = d[i].slice(-2) // берём две последние цифры
		}

		return d.slice(0,3).join('.') + ' ' + d.slice(3).join(':');


	}

	alert( formatDate(new Date(new Date - 1)) ); // "только что"

	alert( formatDate(new Date(new Date - 30 * 1000)) ); // "30 сек. назад"

	alert( formatDate(new Date(new Date - 7 * 60 * 1000)) ); // "7 мин. назад"

	alert( formatDate(new Date(new Date - 86400 * 1000)) ); // вчерашняя дата в формате "дд.мм.гг чч:мм"

	</script>
</body>

</html>